テトリス機能追加サンプル

(1) テトリミノ着色
　＜考え方＞
　　・おそらく、一番簡単な実装方法は、m_dataと同じ要素数のint型配列を別に追加し、そこに各ブロックの色情報を記録していくこと。ただし、この方法はあまりオブジェクト指向的ではない。
　　・そこで、m_dataの各要素に各ブロックの「状態（state）」と「テトリミノ種類」を両方持たせることを考える。
　　・実現方法はいくつか考えられる。例えば、10の位に状態、1の位にテトリミノ種類を持たせるのも良さそう。
　　・今回は、BLOCK_INFOという構造体を作り、そのメンバーとしてstateとtetriminoTypeを持たせる（それぞれshort型）。そして、m_dataをint型から、このBLOCK_INFO型に変更する。これで配列のバイトサイズを増やさずに色情報を追加できる。
　　・あとは着色のswitch文で、stateが「落下中」または「落下後」のときに、テトリミノ種類に応じた着色が行われるようにもう1つswitch文を追加すればよい。
　　※ただし、m_dataにアクセスしていた全箇所を構造体のメンバーにアクセスするように書き換える必要はある。
　　※これをさらにC++的にして、BLOCK_INFOをクラスにしてメンバーをカプセル化してもよい。

(2) 画面遷移で一瞬ゲームオーバー状態が描画される問題
　＜考え方＞
　　・原因は、画面遷移のタイミングがUpdateとDrawで1フレームずれること。
　　・汎用的に解決するために、このズレ自体を解消する。
　　・Gameクラスにメンバー変数m_next_sceneを追加する。この変数に遷移したい先の画面番号を代入して遷移させる。
　　・同じくGameクラスにメンバー関数ApplySceneTransitionを追加する。この関数内で、もしm_next_sceneに-1以外の値が入っていれば、m_sceneにそれをコピーする処理を作る。
　　・GameクラスのUpdate関数内の先頭付近の行に、このApplySceneTransition関数の呼び出しを追加する。
　　・これで問題となっていたズレはなくなる。
　　※この仕組みをSceneマネージャー的なクラスに仕立てるのもよい。

以上